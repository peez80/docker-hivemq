<?xml version="1.0"?>
<hivemq xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../hivemq-config.xsd">
    <listeners>
        <tcp-listener>
            <port>${HIVEMQ_TCP_PORT}</port>
            <bind-address>0.0.0.0</bind-address>
        </tcp-listener>
        <tls-tcp-listener>
            <port>${HIVEMQ_TCP_TLS_PORT}</port>
            <bind-address>0.0.0.0</bind-address>
            <tls>
                <keystore>
                    <path>/opt/hivemq/cert/hivemq_keystore.jks</path>
                    <password>${HIVEMQ_KEYSTORE_PASSWORD}</password>
                    <private-key-password>${HIVEMQ_PRIVATE_KEY_PASSWORD}</private-key-password>
                </keystore>
                <truststore>
                    <path>/opt/hivemq/cert/hivemq_truststore.jks</path>
                    <password>${HIVEMQ_TRUSTSTORE_PASSWORD}</password>
                </truststore>
                <client-authentication-mode>${HIVEMQ_TLS_CLIENT_AUTHENTICATION_MODE}</client-authentication-mode>
            </tls>
        </tls-tcp-listener>
        <websocket-listener>
            <port>${HIVEMQ_WEBSOCKET_PORT}</port>
            <bind-address>0.0.0.0</bind-address>
            <path>/mqtt</path>
            <subprotocols>
                <subprotocol>mqttv3.1</subprotocol>
            </subprotocols>
            <allow-extensions>true</allow-extensions>
        </websocket-listener>
        <tls-websocket-listener>
            <port>${HIVEMQ_WEBSOCKET_TLS_PORT}</port>
            <bind-address>0.0.0.0</bind-address>
            <path>/mqtt</path>
            <allow-extensions>true</allow-extensions>
            <subprotocols>
                <subprotocol>mqttv3.1</subprotocol>
            </subprotocols>
            <tls>
                <keystore>
                    <path>/opt/hivemq/cert/hivemq_keystore.jks</path>
                    <password>${HIVEMQ_KEYSTORE_PASSWORD}</password>
                    <private-key-password>${HIVEMQ_PRIVATE_KEY_PASSWORD}</private-key-password>
                </keystore>
                <truststore>
                    <path>/opt/hivemq/cert/hivemq_truststore.jks</path>
                    <password>${HIVEMQ_TRUSTSTORE_PASSWORD}</password>
                </truststore>
                <client-authentication-mode>${HIVEMQ_TLS_CLIENT_AUTHENTICATION_MODE}</client-authentication-mode>
            </tls>
        </tls-websocket-listener>
    </listeners>
    <mqtt>
        <max-client-id-length>65535</max-client-id-length>
        <retry-interval>10</retry-interval>
        <max-queued-messages>1000</max-queued-messages>
    </mqtt>

    <throttling>
        <max-connections>-1</max-connections>
        <max-message-size>268435456</max-message-size>
        <outgoing-limit>0</outgoing-limit>
        <incoming-limit>0</incoming-limit>
    </throttling>
    <general>
        <update-check-enabled>true</update-check-enabled>
    </general>
    <persistence>
        <client-session>
            <general>
                <mode>${HIVEMQ_PERSISTENCE_MODE}</mode>
            </general>
            <queued-messages>
                <mode>${HIVEMQ_PERSISTENCE_MODE}</mode>
            </queued-messages>
            <subscriptions>
                <mode>${HIVEMQ_PERSISTENCE_MODE}</mode>
            </subscriptions>
        </client-session>
        <message-flow>
            <incoming>
                <mode>${HIVEMQ_PERSISTENCE_MODE}</mode>
            </incoming>
            <outgoing>
                <mode>${HIVEMQ_PERSISTENCE_MODE}</mode>
            </outgoing>
        </message-flow>
        <retained-messages>
            <mode>${HIVEMQ_PERSISTENCE_MODE}</mode>
        </retained-messages>
    </persistence>

    <!--CLUSTER_START_TAG

    <cluster>
        <enabled>true</enabled>
        <transport>
            <tcp>
                <bind-address>{{CLUSTER_IP}}</bind-address>
                <bind-port>7800</bind-port>
                <client-bind-address>{{CLUSTER_IP}}</client-bind-address>
                <client-bind-port>15000</client-bind-port>
            </tcp>
        </transport>
        <discovery>
            <static>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.1</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.2</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.3</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.4</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.5</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.6</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.7</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.8</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.9</host>
                    <port>7800</port>
                </node>
                <node>
                    <host>{{SWARM_NETWORK_BASE}}.10</host>
                    <port>7800</port>
                </node>
            </static>
        </discovery>
    </cluster>

    CLUSTER_END_TAG-->

</hivemq>
